@model IEnumerable<EmployeeViewModel>
@{
    ViewData["Title"] = "All Employees";
}
@if (TempData["SuccessMessage"] is not null) 
{
    <div class=" alert alert-success" id="SuccessMessage">
		@TempData["SuccessMessage"];
    </div>
}
<a asp-action="Create" asp-controller="Employee" class="btn btn-success" >Add New Employee</a>
@if (Model.Count() > 0) 
{
    <br />
    <br />
    <br />
    <h1>All Employees</h1>
    <br />
   <div class="m-2">
        <form class="row offset-2" asp-action="index">
            <div class="col-8">
                <input type="text" class="form-control" name="searchValue" placeholder="Employee's Name" />
            </div>
            <div class="col-4">
                <input type="submit" value="Search" class="btn btn-info" />
            </div>

        </form>
   </div>
    <table class="table table-striped table-hover mt-3">
        <thead>
            <tr>
                <td>@Html.DisplayNameFor(e=> e.Image)</td>
                <td>@Html.DisplayNameFor(e=> e.Name)</td>
                <td>@Html.DisplayNameFor(e=> e.Age)</td>
                <td>@Html.DisplayNameFor(e=> e.Salary)</td>
                <td>@Html.DisplayNameFor(e=> e.Department)</td>
                <td>@Html.DisplayNameFor(e=> e.Address)</td>
                <td>@Html.DisplayNameFor(e=> e.Email)</td>
                <td>@Html.DisplayNameFor(e=> e.PhonwNumber)</td>
                <td>@Html.DisplayNameFor(e=> e.HireDate)</td>
                <td>@Html.DisplayNameFor(e=> e.IsActive)</td>
                <td>Details</td>
                <td>Update</td>
                <td>Delete</td>
            </tr>
        </thead>
        <tbody>
            @foreach (var employee in Model)
            {
                <tr>
                    <td><img  src="~/Files/Images/@employee.ImageName" class="rounded" height="40" width="40" alt="Employee Image"/></td>
                    <td>@employee.Name</td>
                    <td>@employee.Age</td>
                    @* <td>@employee.Salary</td> *@
                    <td>@Html.DisplayFor(e => employee.Salary)</td>
                    <td>@Html.DisplayFor(e => employee.Department.Name )</td>
                    <td>@employee.Address</td>
                    @* <td>@employee.Email</td> *@
                    <td>@Html.DisplayFor(e => employee.Email)</td>
                    <td>@employee.PhonwNumber</td>
                    <td>@employee.HireDate</td>
                    @* <td>@employee.IsActive</td> *@
                    @* <td>@Html.DisplayFor(e => employee.IsActive )</td> *@
					<td>
						@if (employee.IsActive)
						{
							@* <span class="badge bg-success">Active</span> *@
                            <i class="fa-solid fa-circle" style=" color:green"></i>
						}
						else
						{
							@* <span class="badge bg-danger">Inactive</span> *@
                            <i class="fa-solid fa-circle" style=" color:red"></i>

						}
					<partial name="_ButtonsPartialView" model="employee.Id">
                </tr>
            }
        </tbody>
    </table>
}
else{
    <div class="mt-5 alert alert-warning">
        <h3> There Is No Employees</h3>
    </div>
}
@section Scripts
{
	@if (TempData["SuccessMessage"] is not null)
	{
		<script>
			setTimeout(function () {
				var successMessage = document.getElementById('SuccessMessage');
				if (successMessage) {
					successMessage.style.display = 'none';
				}
			}, 5000); // 5000 milliseconds = 5 seconds
		</script>
	}
}

